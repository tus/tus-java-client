<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_75) on Mon Sep 19 08:46:31 UTC 2016 -->
<title>TusUploader</title>
<meta name="date" content="2016-09-19">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TusUploader";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../io/tus/java/client/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/tus/java/client/TusUpload.html" title="class in io.tus.java.client"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../io/tus/java/client/TusURLMemoryStore.html" title="class in io.tus.java.client"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/tus/java/client/TusUploader.html" target="_top">Frames</a></li>
<li><a href="TusUploader.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.tus.java.client</div>
<h2 title="Class TusUploader" class="title">Class TusUploader</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>io.tus.java.client.TusUploader</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">TusUploader</span>
extends java.lang.Object</pre>
<div class="block">This class is used for doing the actual upload of the files. Instances are returned by
 <a href="../../../../io/tus/java/client/TusClient.html#createUpload(io.tus.java.client.TusUpload)"><code>TusClient.createUpload(TusUpload)</code></a>, <a href="../../../../io/tus/java/client/TusClient.html#createUpload(io.tus.java.client.TusUpload)"><code>TusClient.createUpload(TusUpload)</code></a> and
 <a href="../../../../io/tus/java/client/TusClient.html#resumeOrCreateUpload(io.tus.java.client.TusUpload)"><code>TusClient.resumeOrCreateUpload(TusUpload)</code></a>.
 <br>
 After obtaining an instance you can upload a file by following these steps:
 <ol>
  <li>Upload a chunk using <a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()"><code>uploadChunk()</code></a></li>
  <li>Optionally get the new offset (<a href="../../../../io/tus/java/client/TusUploader.html#getOffset()"><code>getOffset()</code></a> to calculate the progress</li>
  <li>Repeat step 1 until the <a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()"><code>uploadChunk()</code></a> returns -1</li>
  <li>Close HTTP connection and InputStream using <a href="../../../../io/tus/java/client/TusUploader.html#finish()"><code>finish()</code></a> to free resources</li>
 </ol></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#TusUploader(io.tus.java.client.TusClient,%20java.net.URL,%20io.tus.java.client.TusInputStream,%20long)">TusUploader</a></strong>(<a href="../../../../io/tus/java/client/TusClient.html" title="class in io.tus.java.client">TusClient</a>&nbsp;client,
           java.net.URL&nbsp;uploadURL,
           io.tus.java.client.TusInputStream&nbsp;input,
           long&nbsp;offset)</code>
<div class="block">Begin a new upload request by opening a PATCH request to specified upload URL.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#finish()">finish</a></strong>()</code>
<div class="block">Finish the request by closing the HTTP connection and the InputStream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#getChunkSize()">getChunkSize</a></strong>()</code>
<div class="block">Returns the current chunk size set using <a href="../../../../io/tus/java/client/TusUploader.html#setChunkSize(int)"><code>setChunkSize(int)</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#getOffset()">getOffset</a></strong>()</code>
<div class="block">Get the current offset for the upload.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#getRequestPayloadSize()">getRequestPayloadSize</a></strong>()</code>
<div class="block">Get the current maximum payload size for a single request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.net.URL</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#getUploadURL()">getUploadURL</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#setChunkSize(int)">setChunkSize</a></strong>(int&nbsp;size)</code>
<div class="block">Sets the used chunk size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#setRequestPayloadSize(int)">setRequestPayloadSize</a></strong>(int&nbsp;size)</code>
<div class="block">Set the maximum payload size for a single request counted in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()">uploadChunk</a></strong>()</code>
<div class="block">Upload a part of the file by reading a chunk from the InputStream and writing
 it to the HTTP request's body.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk(int)">uploadChunk</a></strong>(int&nbsp;chunkSize)</code>
<div class="block"><strong>Deprecated.</strong>&nbsp;
<div class="block"><i>This method is inefficient and has been replaced by <a href="../../../../io/tus/java/client/TusUploader.html#setChunkSize(int)"><code>setChunkSize(int)</code></a>
             and <a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()"><code>uploadChunk()</code></a> and should not be used anymore. The reason is, that
             this method allocates a new buffer with the supplied chunk size for each time
             it's called without reusing it. This results in a high number of memory
             allocations and should be avoided. The new methods do not have this issue.</i></div>
</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TusUploader(io.tus.java.client.TusClient, java.net.URL, io.tus.java.client.TusInputStream, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TusUploader</h4>
<pre>public&nbsp;TusUploader(<a href="../../../../io/tus/java/client/TusClient.html" title="class in io.tus.java.client">TusClient</a>&nbsp;client,
           java.net.URL&nbsp;uploadURL,
           io.tus.java.client.TusInputStream&nbsp;input,
           long&nbsp;offset)
            throws java.io.IOException</pre>
<div class="block">Begin a new upload request by opening a PATCH request to specified upload URL. After this
 method returns a connection will be ready and you can upload chunks of the file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>client</code> - Used for preparing a request (<a href="../../../../io/tus/java/client/TusClient.html#prepareConnection(java.net.HttpURLConnection)"><code>TusClient.prepareConnection(HttpURLConnection)</code></a></dd><dd><code>uploadURL</code> - URL to send the request to</dd><dd><code>input</code> - Stream to read (and seek) from and upload to the remote server</dd><dd><code>offset</code> - Offset to read from</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Thrown if an exception occurs while issuing the HTTP request.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setChunkSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setChunkSize</h4>
<pre>public&nbsp;void&nbsp;setChunkSize(int&nbsp;size)</pre>
<div class="block">Sets the used chunk size. This number is used by <a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()"><code>uploadChunk()</code></a> to indicate how
 much data is uploaded in a single take. When choosing a value for this parameter you need to
 consider that uploadChunk() will only return once the specified number of bytes has been
 sent. For slow internet connections this may take a long time. In addition, a buffer with
 the chunk size is allocated and kept in memory.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>size</code> - The new chunk size</dd></dl>
</li>
</ul>
<a name="getChunkSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChunkSize</h4>
<pre>public&nbsp;int&nbsp;getChunkSize()</pre>
<div class="block">Returns the current chunk size set using <a href="../../../../io/tus/java/client/TusUploader.html#setChunkSize(int)"><code>setChunkSize(int)</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Current chunk size</dd></dl>
</li>
</ul>
<a name="setRequestPayloadSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRequestPayloadSize</h4>
<pre>public&nbsp;void&nbsp;setRequestPayloadSize(int&nbsp;size)
                           throws java.lang.IllegalStateException</pre>
<div class="block">Set the maximum payload size for a single request counted in bytes. This is useful for splitting
 bigger uploads into multiple requests. For example, if you have a resource of 2MB and
 the payload size set to 1MB, the upload will be transferred by two requests of 1MB each.

 The default value for this setting is 1024 * 1024 bytes (1MB).

 This method must not be called when the uploader has currently an open connection to the
 remote server. In general, try to set the payload size before invoking <a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()"><code>uploadChunk()</code></a>
 the first time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>size</code> - Number of bytes for a single payload</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - Thrown if the uploader currently has a connection open</dd><dt><span class="strong">See Also:</span></dt><dd><code>#getRequestPayloadSize()}</code></dd></dl>
</li>
</ul>
<a name="getRequestPayloadSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRequestPayloadSize</h4>
<pre>public&nbsp;int&nbsp;getRequestPayloadSize()</pre>
<div class="block">Get the current maximum payload size for a single request.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Number of bytes for a single payload</dd><dt><span class="strong">See Also:</span></dt><dd><code>#setChunkSize(int)}</code></dd></dl>
</li>
</ul>
<a name="uploadChunk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uploadChunk</h4>
<pre>public&nbsp;int&nbsp;uploadChunk()
                throws java.io.IOException,
                       <a href="../../../../io/tus/java/client/ProtocolException.html" title="class in io.tus.java.client">ProtocolException</a></pre>
<div class="block">Upload a part of the file by reading a chunk from the InputStream and writing
 it to the HTTP request's body. If the number of available bytes is lower than the chunk's
 size, all available bytes will be uploaded and nothing more.
 No new connection will be established when calling this method, instead the connection opened
 in the constructor will be used.
 The size of the read chunk can be obtained using <a href="../../../../io/tus/java/client/TusUploader.html#getChunkSize()"><code>getChunkSize()</code></a> and changed
 using <a href="../../../../io/tus/java/client/TusUploader.html#setChunkSize(int)"><code>setChunkSize(int)</code></a>.
 In order to obtain the new offset, use <a href="../../../../io/tus/java/client/TusUploader.html#getOffset()"><code>getOffset()</code></a> after this method returns.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Number of bytes read and written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Thrown if an exception occurs while reading from the source or writing
                      to the HTTP request.</dd>
<dd><code><a href="../../../../io/tus/java/client/ProtocolException.html" title="class in io.tus.java.client">ProtocolException</a></code></dd></dl>
</li>
</ul>
<a name="uploadChunk(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uploadChunk</h4>
<pre>@Deprecated
public&nbsp;int&nbsp;uploadChunk(int&nbsp;chunkSize)
                throws java.io.IOException,
                       <a href="../../../../io/tus/java/client/ProtocolException.html" title="class in io.tus.java.client">ProtocolException</a></pre>
<div class="block"><span class="strong">Deprecated.</span>&nbsp;<i>This method is inefficient and has been replaced by <a href="../../../../io/tus/java/client/TusUploader.html#setChunkSize(int)"><code>setChunkSize(int)</code></a>
             and <a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()"><code>uploadChunk()</code></a> and should not be used anymore. The reason is, that
             this method allocates a new buffer with the supplied chunk size for each time
             it's called without reusing it. This results in a high number of memory
             allocations and should be avoided. The new methods do not have this issue.</i></div>
<div class="block">Upload a part of the file by read a chunks specified size from the InputStream and writing
 it to the HTTP request's body. If the number of available bytes is lower than the chunk's
 size, all available bytes will be uploaded and nothing more.
 No new connection will be established when calling this method, instead the connection opened
 in the constructor will be used.
 In order to obtain the new offset, use <a href="../../../../io/tus/java/client/TusUploader.html#getOffset()"><code>getOffset()</code></a> after this method returns.

 This method ignored the payload size per request, which may be set using
 <a href="../../../../io/tus/java/client/TusUploader.html#setRequestPayloadSize(int)"><code>setRequestPayloadSize(int)</code></a>. Please, use <a href="../../../../io/tus/java/client/TusUploader.html#uploadChunk()"><code>uploadChunk()</code></a> instead.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkSize</code> - Maximum number of bytes which will be uploaded. When choosing a value
                  for this parameter you need to consider that the method call will only
                  return once the specified number of bytes have been sent. For slow
                  internet connections this may take a long time.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Number of bytes read and written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Thrown if an exception occurs while reading from the source or writing
                      to the HTTP request.</dd>
<dd><code><a href="../../../../io/tus/java/client/ProtocolException.html" title="class in io.tus.java.client">ProtocolException</a></code></dd></dl>
</li>
</ul>
<a name="getOffset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOffset</h4>
<pre>public&nbsp;long&nbsp;getOffset()</pre>
<div class="block">Get the current offset for the upload. This is the number of all bytes uploaded in total and
 in all requests (not only this one). You can use it in conjunction with
 <a href="../../../../io/tus/java/client/TusUpload.html#getSize()"><code>TusUpload.getSize()</code></a> to calculate the progress.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The upload's current offset.</dd></dl>
</li>
</ul>
<a name="getUploadURL()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUploadURL</h4>
<pre>public&nbsp;java.net.URL&nbsp;getUploadURL()</pre>
</li>
</ul>
<a name="finish()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finish</h4>
<pre>public&nbsp;void&nbsp;finish()
            throws <a href="../../../../io/tus/java/client/ProtocolException.html" title="class in io.tus.java.client">ProtocolException</a>,
                   java.io.IOException</pre>
<div class="block">Finish the request by closing the HTTP connection and the InputStream.
 You can call this method even before the entire file has been uploaded. Use this behavior to
 enable pausing uploads.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../io/tus/java/client/ProtocolException.html" title="class in io.tus.java.client">ProtocolException</a></code> - Thrown if the server sends an unexpected status
 code</dd>
<dd><code>java.io.IOException</code> - Thrown if an exception occurs while cleaning up.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../io/tus/java/client/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/tus/java/client/TusUpload.html" title="class in io.tus.java.client"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../io/tus/java/client/TusURLMemoryStore.html" title="class in io.tus.java.client"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/tus/java/client/TusUploader.html" target="_top">Frames</a></li>
<li><a href="TusUploader.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
